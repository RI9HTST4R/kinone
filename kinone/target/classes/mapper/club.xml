<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="clubmapper">
    
    <select id="clubList" resultType="club">
    	select * from club where isbeing = 1
    </select>
    
    <select id="clubSeasonRankList" parameterType="java.util.HashMap" resultType="club_season">
    	select C.cname_short, C.emblem, CS.* 
    	from club_season CS, club C 
    	where CS.ccode = C.ccode and CS.seasoncode = #{seasoncode} and CS.lcode = #{lcode} 
    	order by (CS.win*3+CS.draw*1) desc,(CS.c_ggoal-CS.c_lgoal) desc, CS.c_ggoal desc, (CS.win+CS.draw+CS.lose) asc
    	
    </select>
    <select id="getClub" parameterType="String" resultType="club">
    	select * from club where ccode = #{club_code}
    </select>
    <select id="getStadium" parameterType="String" resultType="stadium">
    	select * from stadium where ccode = #{ccode}
    </select>
    <select id="checkReserv" parameterType="reservation" resultType="reservation">
    	select * from reservation where seatcode = #{seatcode} and mcode = #{mcode}
    </select>
  	<select id="getSeatsList" parameterType="String" resultType="reservation">
    	select * from reservation where mcode = #{mcode}
    </select>
    <select id="getTickets" parameterType="map" resultType="int">
    	select count(*) from reservation where mno = #{mno} and mcode = #{mcode} 
    </select>
    
    <insert id="insertReserve" parameterType="list">
        <foreach collection="list" index="index" item="item" open="INSERT ALL" separator=" " close="SELECT * FROM DUAL">	
		 INTO reservation (rcode, mcode, seatcode, rdate,mno,ccode) VALUES 
				(#{item.rcode},#{item.mcode},#{item.seatcode},sysdate,#{item.mno},#{item.ccode})
        </foreach>
	</insert>
    
</mapper>








